<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=Montserrat|Montserrat+Alternates:600" rel="stylesheet">
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <script src = "jquery-3.2.1.js"></script>
        
        <title>User Profile</title>
        
        <style>
            body{
                padding:0;
                margin:0;
                margin-top:120px;
                background-color:#dbdbdb;
                height:100%;
                justify-content:center;
            }
            
            /* header */
            .header{
                position:fixed;
                display:flex;
                top:0px;
                flex-direction:column;
                width:100%;
                height:120px;
                margin-bottom:50px;
                background-image:url("bg-index2.jpg");
                background-position: -1000px -0x;
            }
            .header-buttons{
                display:flex;
                margin:auto;
                align-content:center;
                justify-content:center;
            }
            #header-logo p{
                padding:0;
                color:#f0f0f0;
                margin-top:15px;
                text-align:center;
                font-size-adjust:auto;
                font-size:220%;
                font-family: 'Montserrat Alternates', sans-serif;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #header-logo p:hover{
                color:#557c83;
                text-shadow:2px 2px #f0f0f0; 
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #home-button{
                width:35px;
                height:29px;
                margin-top:-40px;
                margin-right:20px;
                background-image:url("spritesheet.png");
                background-position:-35px 0px;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #home-button:hover{
                opacity:0.5;
                filter:drop-shadow(2px 2px #557c83);
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #album-button{
                width:38px;
                height:29px;
                margin-top:-40px;
                margin-right:20px;
                background-image:url("spritesheet.png");
                background-position:0px 0px;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #album-button:hover{
                opacity:0.5;
                filter:drop-shadow(2px 2px #557c83);
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #users-button{
                width:38px;
                height:29px;
                margin-top:-40px;
                background-image:url("spritesheet.png");
                background-position:-67px 0px;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #users-button:hover{
                opacity:0.5;
                filter:drop-shadow(2px 2px #557c83);
                transition-duration:0.5s;
                transition-timing-function:ease;
            }            
            .wrapper{
                width:1000px;
                margin:0 auto;
            }
            
            /* content */
            .posts-container{
                margin-top:50px;
                float:right;
                width:600px;
            }
            .post-item-container{
                width:600px;
                margin-left:auto;
                margin-right:auto;
                margin-bottom:50px;
                height:auto;
                min-height:15%;
                overflow:auto;
                background-color:#ffffff;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            .title{
                margin-left:20px;
                margin-right:20px; 
                margin-top:20px;
                margin-bottom:5px;
                color:#557c83;
                font-size:150%;
                font-style:italic;
                font-family:'Montserrat', sans-serif;
            }
            .content{
                margin-left:20px;
                margin-right:20px;
                margin-bottom:20px;
                color:#000000;
                font-size:90%;
                font-family:'Montserrat', sans-serif;
            }
            
            /* sidebar */
            .sidebar{
                float:left;
                margin-top:30px;
                display:flex;
                flex-direction:column;
                width: 300px;
                height:auto;
                min-height:40%;
                background-color:#ffffff;
                box-shadow:0px 20px #557c83;
                overflow:auto;
            }
            .profile-photo{
                margin-left:auto;
                margin-right:auto;
                margin-top:30px;
                margin-bottom:20px;
                border:10px solid #dbdbdb;
                border-radius:100%;
                height:90px;
                width:90px;
            }
            .name{
                margin-left:auto;
                margin-right:auto;
                color:#557c83;
                font-size:140%;
                font-family:'Montserrat', sans-serif;
            }
            .name:hover{
                opacity:0.5;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            .username{
                margin-left:auto;
                margin-right:auto;
                margin-bottom:10px;
                color:#969696;
                font-style:italic;
                font-size:80%;
                font-family:'Montserrat', sans-serif;
            }
            .email div::before{
                font-family: "FontAwesome";
                content: "\f003";
                color:#557c83;
                margin-left:-10px;
                margin-right:10px;
            }
            .address div::before{
                font-family: "FontAwesome";
                content: "\f015";
                color:#557c83;
                margin-left:-10px;
                margin-right:10px;
            }
            .phone div::before{
                font-family: "FontAwesome";
                content: "\f095";
                color:#557c83;
                margin-left:-10px;
                margin-right:10px;
            }
            .web div::before{
                font-family: "FontAwesome";
                content: "\f0ac";
                color:#557c83;
                margin-left:-10px;
                margin-right:10px;
            }
            .comp div::before{
                font-family: "FontAwesome";
                content: "\f2bc";
                color:#557c83;
                margin-left:-10px;
                margin-right:10px;
            }
            .info-content{
                text-align:left;
                margin-bottom:5px;
                margin-left:auto;
                margin-right:10px;
                text-align:left;
                color:#000000;
                font-size:80%;
                font-family:'Montserrat', sans-serif;
            }
            .view-posts, .view-photos{
                width:80%;
                height:40px;
                margin-bottom:10px;
                margin-left:auto;
                margin-right:auto;
                background-color:#dbdbdb;
                color:#557c83;
                border:none;
                font-family:'Montserrat', sans-serif;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            .view-photos{
                margin-bottom:20px;
            }
            .view-posts:hover, .view-photos:hover{
                opacity:0.5;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            
            /* footer */
            .footer{
                width:100%;
                text-align:center;
            }
            #view-button{
                width:10%;
                height:7%;
                background-color:#557c83;
                color:#f0f0f0;
                border:none;
                font-family:'Montserrat', sans-serif;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
            #view-button:hover{
                opacity:0.5;
                transition-duration:0.5s;
                transition-timing-function:ease;
            }
        </style>
        
        <script>
            var user;
            var posts = [];
            var x = 5;
            
            window.onload = function() {
                var url = document.location.href,
                params = url.split('?')[1].split('&'),
                data = {}, tmp;
                for (var i = 0, l = params.length; i < l; i++) {
                    tmp = params[i].split('=');
                    data[tmp[0]] = tmp[1];
                }
                
                var name = decodeURI(data.name);
                name = name.replace(/@/g, '');
                
                document.title = name;
                
                initializeProfile(name);
                
            }
            
            var Profile = function(id, name, username, email, address, phone, website, company){
                this.id = id;
                this.name = name;
                this.username = username;
                this.email = email;
                this.address = address;
                this.phone = phone;
                this.website = website;
                this.company = company;
            }
            
            var Post = function(id, userID, title, content){
                this.id = id;
                this.userID = userID;
                this.title = title;
                this.content = content;
            }
            
            function initializeProfile(name){
                $.ajax({
                    url: "https://jsonplaceholder.typicode.com/users",
                    type: "GET",
                    success: function(data){
                        for(i=0; i<data.length; i++){
                            if((data[i].name).localeCompare(name) == 0 ||
                               (data[i].username).localeCompare(name) == 0){
                                user = new Profile(data[i].id, data[i].name,
                                                   data[i].username, data[i].email,
                                                   data[i].address, data[i].phone,
                                                   data[i].website, data[i].company);
                                console.log(user);
                                
                                createSideBar();
                                getPosts();
                            }
                        }
                            
                    }
                });
            }
            
            function createSideBar(){
                var new_sb = document.createElement("div");
                var new_photo = document.createElement("img");
                var new_name = document.createElement("div");
                var new_username = document.createElement("div");
                var new_fi = document.createElement("ul");
                var new_em = document.createElement("li");
                var new_ad = document.createElement("li");
                var new_ph = document.createElement("li");
                var new_wb = document.createElement("li");
                var new_cm = document.createElement("li");
                var new_emc = document.createElement("div");
                var new_adc = document.createElement("div");
                var new_phc = document.createElement("div");
                var new_wbc = document.createElement("div");
                var new_cmc = document.createElement("div");
                var new_pob = document.createElement("button");
                var new_phb = document.createElement("button");
                
                $(new_sb).addClass("sidebar");
                $(new_photo).addClass("profile-photo");
                $(new_name).addClass("name");
                $(new_username).addClass("username");
                $(new_fi).addClass("fa-ul");
                $(new_em).addClass("email");
                $(new_ad).addClass("address");
                $(new_ph).addClass("phone");
                $(new_wb).addClass("web");
                $(new_cm).addClass("comp");
                $(new_emc).addClass("info-content");
                $(new_adc).addClass("info-content");
                $(new_phc).addClass("info-content");
                $(new_wbc).addClass("info-content");
                $(new_cmc).addClass("info-content");
                $(new_pob).addClass("view-posts");
                $(new_phb).addClass("view-photos");
                
                new_photo.src = "fd0c559856ca991e9e28937dc802f0b0.jpg";
                $(new_name).text(user.name);
                $(new_username).text("@"+ user.username);
                $(new_emc).text(user.email);
                $(new_em).append(new_emc);
                $(new_fi).append(new_em);
                
                $(new_adc).text(user.address.street + ", " + user.address.suite + ", " + user.address.city + " (" + user.address.zipcode + ")");
                $(new_ad).append(new_adc);
                $(new_fi).append(new_ad);
                
                $(new_phc).text(user.phone);
                $(new_ph).append(new_phc);
                $(new_fi).append(new_ph);
                $(new_wbc).text(user.website);
                $(new_wb).append(new_wbc);
                $(new_fi).append(new_wb);
                
                $(new_cmc).text(user.company.name + " (" + user.company.bs + ")" + " - " + user.company.catchPhrase);
                $(new_cm).append(new_cmc);
                $(new_fi).append(new_cm);
                
                $(new_pob).text("VIEW ALL POSTS");
                $(new_phb).text("VIEW ALL PHOTOS");
                
                $(new_sb).append(new_photo);
                $(new_sb).append(new_name);
                $(new_sb).append(new_username);
                $(new_sb).append(new_fi);
                $(new_sb).append(new_pob);
                $(new_sb).append(new_phb);
                
                $(".sidebar-container").append(new_sb);
            }
            
            function getPosts(){
                $.ajax({
                    url: "https://jsonplaceholder.typicode.com/posts",
                    type: "GET",
                    success: function(data){
                        for(var i=0; i<data.length; i++){
                            if(data[i].userId == user.id){
                                var post = new Post(data[i].id, data[i-1].userId, data[i].title, data[i].body);
                                
                                posts.push(post); 
                                
                                console.log(post);
                            }
                        }
                        assemblePIC(x); 
                    }
                });
            }
            
            function assemblePIC(x){
                for(var i=posts.length-x+5; i>posts.length-x; i--){
                    var new_pic = document.createElement("div");
                    var new_title = document.createElement("div");
                    var new_content = document.createElement("div");
                    
                    $(new_pic).addClass("post-item-container");
                    $(new_title).addClass("title");
                    $(new_content).addClass("content");
                    
                    $(new_title).text(posts[i-1].title);
                    $(new_content).text(posts[i-1].content);
                    
                    $(new_pic).append(new_title);
                    $(new_pic).append(new_content);
                    
                    $(".posts-container").append(new_pic);
                }
            }
            
            function viewAllPosts(){
                for(var i=posts.length; i>0; i--){
                    var new_pic = document.createElement("div");
                    var new_title = document.createElement("div");
                    var new_content = document.createElement("div");
                    
                    $(new_pic).addClass("post-item-container");
                    $(new_title).addClass("title");
                    $(new_content).addClass("content");
                    
                    $(new_title).text(posts[i-1].title);
                    $(new_content).text(posts[i-1].content);
                    
                    $(new_pic).append(new_title);
                    $(new_pic).append(new_content);
                    
                    $(".posts-container").append(new_pic);
                }
            }
            
            $(document).ready(function(){
                var x = 5;
                
                $(".sidebar-container").on('click', ".view-posts", function(){
                    $(".posts-container").empty();
                    viewAllPosts();
                    x = 5;
                });
                
                $(".sidebar-container").on('click', ".name", function(){
                    $(".posts-container").empty();
                    getPosts();
                });
            });
        </script>
    </head>
    
    <body>
        <div class="header">
            <div id="header-logo">
                <p>placeholder</p>
            </div>
            <div class="header-buttons">
                <a href="index.html"><div id="home-button"></div></a>
                <a href="all-photos-page.html"><div id="album-button"></div></a>
                <div id="users-button"></div>
            </div>
        </div>
        
        <div class="wrapper">
            <div class="sidebar-container">
         
            </div>
         
            <div class="posts-container">
            </div>
            
            <div class="footer">
                <button id="view-button">VIEW MORE</button>
            </div>
        </div>
    </body>
</html>